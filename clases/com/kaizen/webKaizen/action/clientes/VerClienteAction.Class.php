<?php/** * Acción para visualizar un cliente. * * @author Lucrecia * @since 18-01-2011 * */class VerClienteAction extends SecureOutputAction {    /**     * consulta un cliente.     * @return forward.     */    protected function getContenido() {        $xtpl = new XTemplate(APP_PATH . 'clientes/vercliente.html');        if (isset($_GET ['id'])) {            $cd_cliente = $_GET ['id'];            $manager = new ClienteManager();            try {                $oCliente = $manager->getClientePorId($cd_cliente);            } catch (GenericException $ex) {                $oCliente = new Cliente();                //TODO ver si se muestra un mensaje de error.            }                      //se muestra el cliente.            $xtpl->assign('cd_cliente', $oCliente->getCd_cliente());            $xtpl->assign('ds_apynom', stripslashes($oCliente->getDs_apynom()));            $xtpl->assign('ds_estadocivil', $oCliente->getDs_estadocivil());            $xtpl->assign('ds_condiva', $oCliente->getDs_condiva());            $xtpl->assign('ds_tipodoc', $oCliente->getDs_tipodoc());            $xtpl->assign('ds_apynom', stripslashes($oCliente->getDs_apynom()));            $xtpl->assign('nu_doc', stripslashes($oCliente->getNu_doc()));            $xtpl->assign('dt_nacimiento', stripslashes($oCliente->getDt_nacimiento()));            $xtpl->assign('ds_cuit', stripslashes($oCliente->getDs_cuil_cuit()));            $estadocivil_id = stripslashes($oCliente->getCd_estadocivil());            if ($estadocivil_id == CASADO || $estadocivil_id == CONCUBINO) {                $xtpl->assign('ds_conyuge', stripslashes($oCliente->getDs_conyuge()));                $xtpl->parse('main.nombre_conyuge');            }            $xtpl->assign('ds_nacionalidad', stripslashes($oCliente->getDs_nacionalidad()));            $xtpl->assign('ds_cp', stripslashes($oCliente->getDs_cp()));            $xtpl->assign('ds_teparticular', stripslashes($oCliente->getDs_teparticular()));            $xtpl->assign('ds_telaboral', stripslashes($oCliente->getDs_telaboral()));            $xtpl->assign('ds_email', stripslashes($oCliente->getDs_email()));            $xtpl->assign('ds_actividad_ocupacion', stripslashes($oCliente->getDs_actividad_ocupacion()));            $xtpl->assign('ds_lugartrabajo', stripslashes($oCliente->getDs_lugartrabajo()));            $xtpl->assign('ds_cuil_cuit', stripslashes($oCliente->getDs_cuil_cuit()));            $xtpl->assign('ds_comollego', stripslashes($oCliente->getDs_comollego()));            $xtpl->assign('ds_dircalle', stripslashes($oCliente->getDs_dircalle()));            $xtpl->assign('ds_dirnro', stripslashes($oCliente->getDs_dirnro()));            $xtpl->assign('ds_dirpiso', "Piso " . stripslashes($oCliente->getDs_dirpiso()));            $xtpl->assign('ds_dirdepto', "Depto " . stripslashes($oCliente->getDs_dirdepto()));            $xtpl->assign('ds_localidad', stripslashes($oCliente->getDs_localidad()));            $xtpl->assign('ds_provincia', stripslashes($oCliente->getDs_provincia()));            $xtpl->assign('ds_pais', stripslashes($oCliente->getDs_pais()));        }        $xtpl->assign('titulo', 'Detalle de cliente');        $xtpl->parse('main');        return $xtpl->text('main');    }    public function getFuncion() {        return "Ver cliente";    }    public function getTitulo() {        return "Detalle de Cliente";    }}